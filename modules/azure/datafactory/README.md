# datafactory

<!-- TERRAFORM_DOCS_BLOCK -->

## Inputs

| Name                                                                                                                              | Description                                                                                                                                                                                                 | Type                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Default | Required |
| --------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------- | :------: |
| <a name="input_datafactory_contributor_group_id"></a> [datafactory_contributor_group_id](#input_datafactory_contributor_group_id) | The ID of the group that should be granted contributor access to the Data Factory.                                                                                                                          | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                               | n/a     |   yes    |
| <a name="input_git_backend_config"></a> [git_backend_config](#input_git_backend_config)                                           | Configuration for the github repository                                                                                                                                                                     | <pre>object({<br>    type = string # must be either "github" or "azuredevops"<br><br>    # Required for Github<br>    git_url = optional(string)<br><br>    # Required for Azure DevOps<br>    project_name = optional(string)<br>    tenant_id    = optional(string)<br><br>    # General configuration<br>    account_name    = string<br>    branch_name     = string<br>    repository_name = string<br>    root_folder     = string<br>  })</pre> | n/a     |   yes    |
| <a name="input_instance"></a> [instance](#input_instance)                                                                         | Identifier for the application, workload or service                                                                                                                                                         | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                               | n/a     |   yes    |
| <a name="input_org_code"></a> [org_code](#input_org_code)                                                                         | The organization code for the environment                                                                                                                                                                   | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                               | n/a     |   yes    |
| <a name="input_resource_group_info"></a> [resource_group_info](#input_resource_group_info)                                        | The name and location of the Resource Group into which the Data Factory should be placed.                                                                                                                   | <pre>object({<br>    id       = optional(string, "")<br>    name     = string<br>    location = string<br>  })</pre>                                                                                                                                                                                                                                                                                                                                   | n/a     |   yes    |
| <a name="input_tier"></a> [tier](#input_tier)                                                                                     | Tier of the environment                                                                                                                                                                                     | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                               | n/a     |   yes    |
| <a name="input_datalake_id"></a> [datalake_id](#input_datalake_id)                                                                | The id of the datalake to assign the data factory to.                                                                                                                                                       | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                               | `""`    |    no    |
| <a name="input_global_parameters"></a> [global_parameters](#input_global_parameters)                                              | A list of global parameters to be added to the Data Factory. These parameters will be available to all pipelines in the Data Factory.                                                                       | <pre>list(object({<br>    name  = string<br>    type  = string<br>    value = any<br>  }))</pre>                                                                                                                                                                                                                                                                                                                                                       | `[]`    |    no    |
| <a name="input_grant_access_to_warehouse"></a> [grant_access_to_warehouse](#input_grant_access_to_warehouse)                      | Whether to grant the the data factory access to the warehouse.                                                                                                                                              | `bool`                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `false` |    no    |
| <a name="input_group_config"></a> [group_config](#input_group_config)                                                             | Configuration for the Entra ID Group that will be created for the Data Factory principal.<br>    The passed `purpose` will be included in the group name.<br>    If not provided, no group will be created. | <pre>object({<br>    purpose = string<br>    owners  = list(string)<br>  })</pre>                                                                                                                                                                                                                                                                                                                                                                      | `null`  |    no    |
| <a name="input_link_service_to_datalake"></a> [link_service_to_datalake](#input_link_service_to_datalake)                         | Whether to link the data factory to the datalake via Linked Services.                                                                                                                                       | `bool`                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `false` |    no    |
| <a name="input_name_override"></a> [name_override](#input_name_override)                                                          | Override the name of the Data Factory. If not provided, the name will be generated.                                                                                                                         | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                               | `null`  |    no    |
| <a name="input_tags"></a> [tags](#input_tags)                                                                                     | Any tags that should be present on created resources. Will get merged with local.default_tags                                                                                                               | `map(string)`                                                                                                                                                                                                                                                                                                                                                                                                                                          | `{}`    |    no    |
| <a name="input_warehouse_id"></a> [warehouse_id](#input_warehouse_id)                                                             | The id the warehouse to assign the data factory to.                                                                                                                                                         | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                               | `null`  |    no    |

## Outputs

| Name                                                                                                                 | Description                                                      |
| -------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------- |
| <a name="output_group_id"></a> [group_id](#output_group_id)                                                          | The ID the Entra group to which the datafactory belongs.         |
| <a name="output_group_name"></a> [group_name](#output_group_name)                                                    | The name of the Entra group to which the datafactory belongs.    |
| <a name="output_id"></a> [id](#output_id)                                                                            | The ID of the data factory.                                      |
| <a name="output_identity"></a> [identity](#output_identity)                                                          | The name of the data factory.                                    |
| <a name="output_name"></a> [name](#output_name)                                                                      | The name of the data factory.                                    |
| <a name="output_service_principal_object_id"></a> [service_principal_object_id](#output_service_principal_object_id) | The Service Principal / Object ID that the Data Factory runs as. |

## Resources

| Name                                                                                                                                                                                                  | Type        |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- |
| [azurerm_data_factory.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/data_factory)                                                                             | resource    |
| [azurerm_data_factory_linked_service_data_lake_storage_gen2.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/data_factory_linked_service_data_lake_storage_gen2) | resource    |
| [azurerm_data_factory_managed_private_endpoint.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/data_factory_managed_private_endpoint)                           | resource    |
| [azurerm_storage_account.datalake](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/storage_account)                                                                | data source |

## Modules

| Name                                                                                      | Source                   | Version |
| ----------------------------------------------------------------------------------------- | ------------------------ | ------- |
| <a name="module_contributor_access"></a> [contributor_access](#module_contributor_access) | ../role-assignment       | n/a     |
| <a name="module_datafactory_group"></a> [datafactory_group](#module_datafactory_group)    | ../ad-group              | n/a     |
| <a name="module_datalake_access"></a> [datalake_access](#module_datalake_access)          | ../role-assignment       | n/a     |
| <a name="module_defaults"></a> [defaults](#module_defaults)                               | ../../skyvafnir/defaults | n/a     |
| <a name="module_warehouse_access"></a> [warehouse_access](#module_warehouse_access)       | ../role-assignment       | n/a     |

## Requirements

| Name                                                                     | Version |
| ------------------------------------------------------------------------ | ------- |
| <a name="requirement_terraform"></a> [terraform](#requirement_terraform) | >= 1.1  |
| <a name="requirement_azurerm"></a> [azurerm](#requirement_azurerm)       | >=3.0.0 |

## Providers

| Name                                                         | Version |
| ------------------------------------------------------------ | ------- |
| <a name="provider_azurerm"></a> [azurerm](#provider_azurerm) | 3.90.0  |

<!-- /TERRAFORM_DOCS_BLOCK -->
